<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Maaf ya, Alma 💗</title>
  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            bubble: {
              light: "#FFE7F3",
              mid: "#FFBBDD",
              deep: "#FF8FC8",
            },
            candy: {
              50: "#FFF0F7",
              100: "#FFD9EC",
              200: "#FFC1E1",
              300: "#FFA9D6",
              400: "#FF91CB",
              500: "#FF79C1",
              600: "#F064AC",
              700: "#D44E94",
            }
          },
          fontFamily: {
            display: ['"Poppins"', "ui-sans-serif", "system-ui"],
            body: ['"Nunito"', "ui-sans-serif", "system-ui"]
          },
          boxShadow: {
            soft: "0 10px 25px rgba(255, 143, 200, 0.35)",
            innerPink: "inset 0 0 0 2px #FF8FC8"
          },
          animation: {
            float: "float 6s ease-in-out infinite",
            floatSlow: "float 9s ease-in-out infinite",
            pop: "pop 300ms ease-out",
            pulseSoft: "pulseSoft 2.5s ease-in-out infinite"
          },
          keyframes: {
            float: {
              "0%": { transform: "translateY(0px)" },
              "50%": { transform: "translateY(-12px)" },
              "100%": { transform: "translateY(0px)" }
            },
            pop: {
              "0%": { transform: "scale(0.9)", opacity: "0" },
              "100%": { transform: "scale(1)", opacity: "1" }
            },
            pulseSoft: {
              "0%,100%": { transform: "scale(1)" },
              "50%": { transform: "scale(1.03)" }
            }
          }
        }
      }
    }
  </script>
  <style>
    /* Cute background blobs */
    .blob {
      position: absolute;
      filter: blur(40px);
      opacity: 0.6;
      z-index: 0;
    }
    .sticker {
      user-select: none;
      -webkit-user-drag: none;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-bubble-light via-candy-50 to-bubble-light relative overflow-x-hidden">
  <!-- Floating blobs -->
  <div class="blob w-64 h-64 rounded-full bg-bubble-mid top-[-40px] left-[-30px] animate-float"></div>
  <div class="blob w-80 h-80 rounded-full bg-bubble-deep bottom-[-60px] right-[-20px] animate-floatSlow"></div>
  <div class="blob w-72 h-72 rounded-full bg-candy-200 top-1/3 right-10 animate-float"></div>

  <!-- Content wrapper -->
  <main class="relative z-10 max-w-5xl mx-auto px-6 py-10">
    <!-- Header -->
    <header class="text-center mb-8">
      <div class="inline-flex items-center gap-3 bg-white/70 backdrop-blur-md px-5 py-2 rounded-full shadow-soft animate-pop">
        <span class="text-sm text-pink-700">Untuk</span>
        <span class="font-display font-semibold text-pink-700">Alma</span>
        <span class="text-xl">🌸</span>
      </div>
      <h1 class="mt-5 font-display text-4xl md:text-5xl font-extrabold text-pink-700 drop-shadow-sm">
        Maaf ya, Alma 💖
      </h1>
      <p class="mt-3 font-body text-pink-700/90">
        Aku benar-benar minta maaf sudah bikin Alma bad mood. Boleh aku coba benerin harimu?
      </p>
    </header>

    <!-- Apology Card -->
    <section class="bg-white/80 backdrop-blur-md rounded-3xl p-6 md:p-8 shadow-soft border border-pink-200/60">
      <div class="flex flex-col-reverse md:flex-row items-center gap-6">
        <div class="md:w-7/12">
          <h2 class="font-display text-2xl md:text-3xl text-pink-700 mb-3">Surat Maaf Kecil</h2>
          <p class="font-body text-pink-800/90 leading-relaxed">
            Alma, maaf ya atas yang tadi. Aku nggak bermaksud bikin kamu kesal. Aku sayang sama perasaanmu dan
            pengin belajar biar nggak ngulangin lagi. Kalau Alma mau, aku siap dengerin pelan-pelan.
          </p>

          <!-- Promise Pills -->
          <div class="mt-5 flex flex-wrap gap-2">
            <span class="px-3 py-1 rounded-full bg-candy-100 text-pink-800 text-sm">Akan dengerin lebih baik 👂</span>
            <span class="px-3 py-1 rounded-full bg-candy-100 text-pink-800 text-sm">Jujur & sabar 💞</span>
            <span class="px-3 py-1 rounded-full bg-candy-100 text-pink-800 text-sm">Bikin senyum lagi 😊</span>
          </div>

          <!-- Action buttons -->
          <div class="mt-6 flex flex-wrap items-center gap-3">
            <button id="acceptBtn" class="px-5 py-3 rounded-xl bg-pink-500 hover:bg-pink-600 active:bg-pink-700 text-white font-display shadow-soft transition transform hover:-translate-y-0.5 focus:outline-none focus:ring-4 focus:ring-pink-300">
              Maafin Aku 💗
            </button>
            <button id="talkBtn" class="px-5 py-3 rounded-xl bg-white text-pink-700 border border-pink-300 hover:border-pink-400 hover:bg-pink-50 font-display shadow-sm transition focus:outline-none focus:ring-4 focus:ring-pink-200">
              Ayo Ngobrol Pelan-pelan
            </button>
          </div>
        </div>

        <!-- Cute Sticker Illustration (SVG hearts & bear) -->
        <div class="md:w-5/12">
          <div class="relative w-full aspect-square">
            <!-- Floating hearts -->
            <div class="absolute -top-2 -left-2 sticker animate-float">
              <svg width="84" height="84" viewBox="0 0 84 84" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M42 70C42 70 10 52 10 30C10 20 18 12 28 12C35 12 39.5 16 42 20C44.5 16 49 12 56 12C66 12 74 20 74 30C74 52 42 70 42 70Z" fill="#FF8FC8" stroke="#D44E94" stroke-width="3" />
              </svg>
            </div>
            <div class="absolute top-8 right-3 sticker animate-floatSlow">
              <svg width="60" height="60" viewBox="0 0 84 84" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M42 70C42 70 10 52 10 30C10 20 18 12 28 12C35 12 39.5 16 42 20C44.5 16 49 12 56 12C66 12 74 20 74 30C74 52 42 70 42 70Z" fill="#FFD9EC" stroke="#FF8FC8" stroke-width="3" />
              </svg>
            </div>
            <!-- Kawaii bear -->
            <div class="absolute inset-0 flex items-center justify-center">
              <svg class="drop-shadow-sm" width="240" height="240" viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg" aria-label="Beruang lucu minta maaf">
                <defs>
                  <linearGradient id="fur" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0%" stop-color="#FFF0F7"/>
                    <stop offset="100%" stop-color="#FFD9EC"/>
                  </linearGradient>
                </defs>
                <circle cx="120" cy="120" r="88" fill="url(#fur)" stroke="#FF8FC8" stroke-width="4"/>
                <circle cx="78" cy="78" r="22" fill="#FFE7F3" stroke="#FF8FC8" stroke-width="3"/>
                <circle cx="162" cy="78" r="22" fill="#FFE7F3" stroke="#FF8FC8" stroke-width="3"/>
                <!-- eyes -->
                <circle cx="95" cy="115" r="7" fill="#5B2140"/>
                <circle cx="145" cy="115" r="7" fill="#5B2140"/>
                <!-- blush -->
                <ellipse cx="85" cy="132" rx="12" ry="6" fill="#FFBBDD" opacity="0.8"/>
                <ellipse cx="155" cy="132" rx="12" ry="6" fill="#FFBBDD" opacity="0.8"/>
                <!-- nose/mouth -->
                <ellipse cx="120" cy="132" rx="12" ry="9" fill="#5B2140"/>
                <path d="M112 140 Q120 146 128 140" stroke="#5B2140" stroke-width="3" fill="none" stroke-linecap="round"/>
                <!-- arms -->
                <path d="M60 140 Q70 120 92 138" stroke="#FF8FC8" stroke-width="8" fill="none" stroke-linecap="round"/>
                <path d="M180 140 Q170 120 148 138" stroke="#FF8FC8" stroke-width="8" fill="none" stroke-linecap="round"/>
                <!-- little heart -->
                <path d="M120 170 C120 170 105 162 105 152 C105 147 109 143 114 143 C117 143 119 145 120 147 C121 145 123 143 126 143 C131 143 135 147 135 152 C135 162 120 170 120 170Z" fill="#FF79C1" stroke="#D44E94" stroke-width="2"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Mood Booster Section -->
    <section class="mt-8 grid md:grid-cols-3 gap-6">
      <!-- Compliments -->
      <div class="bg-white/80 backdrop-blur-md rounded-2xl p-6 shadow-soft border border-pink-200/60">
        <div class="flex items-center justify-between">
          <h3 class="font-display text-xl text-pink-700">Pujian Acak ✨</h3>
          <span class="text-2xl">💫</span>
        </div>
        <p id="complimentText" class="mt-3 font-body text-pink-800/90 min-h-[64px]">
          Klik tombol di bawah buat dapet booster semangat!
        </p>
        <button id="complimentBtn" class="mt-4 w-full px-4 py-3 rounded-xl bg-pink-500 hover:bg-pink-600 active:bg-pink-700 text-white font-display shadow-soft transition focus:outline-none focus:ring-4 focus:ring-pink-300">
          Beri Pujian 🎀
        </button>
      </div>

      <!-- Mini Game: Pop Hearts -->
      <div class="bg-white/80 backdrop-blur-md rounded-2xl p-6 shadow-soft border border-pink-200/60">
        <div class="flex items-center justify-between">
          <h3 class="font-display text-xl text-pink-700">Pecahin Hatinya 💘</h3>
          <span class="text-2xl">🎈</span>
        </div>
        <p class="mt-3 font-body text-pink-800/90">
          Klik 7 hati untuk buka pesan spesial.
        </p>
        <div id="heartsArea" class="relative mt-4 h-44 rounded-xl bg-candy-100 overflow-hidden">
          <!-- Hearts will be generated -->
        </div>
        <div id="reward" class="hidden mt-4 p-3 rounded-xl bg-pink-50 text-pink-800 border border-pink-200">
          Yeay! Kamu berhasil! Kamu itu spesial banget. Semoga senyumnya muncul lagi ya 💕
        </div>
      </div>

      <!-- Care Pack -->
      <div class="bg-white/80 backdrop-blur-md rounded-2xl p-6 shadow-soft border border-pink-200/60">
        <div class="flex items-center justify-between">
          <h3 class="font-display text-xl text-pink-700">Care Pack 🍬</h3>
          <span class="text-2xl">🧸</span>
        </div>
        <ul id="careList" class="mt-3 space-y-2">
          <li class="flex items-center justify-between p-3 rounded-xl bg-white border border-pink-200">
            <span class="text-pink-800">Peluk virtual super nyaman</span>
            <button data-item="peluk" class="care-btn text-pink-600 hover:text-pink-700 font-display">Kirim 🤗</button>
          </li>
          <li class="flex items-center justify-between p-3 rounded-xl bg-white border border-pink-200">
            <span class="text-pink-800">Teh hangat + biskuit imut</span>
            <button data-item="teh" class="care-btn text-pink-600 hover:text-pink-700 font-display">Kirim 🍵</button>
          </li>
          <li class="flex items-center justify-between p-3 rounded-xl bg-white border border-pink-200">
            <span class="text-pink-800">Playlist lagu happy</span>
            <button data-item="lagu" class="care-btn text-pink-600 hover:text-pink-700 font-display">Kirim 🎶</button>
          </li>
        </ul>
        <div id="careToast" class="hidden mt-4 p-3 rounded-xl bg-pink-500 text-white text-center font-display shadow-soft">
          Terkirim! Semoga bikin hati Alma lebih hangat 💞
        </div>
      </div>
    </section>

    <!-- Message Board -->
    <section class="mt-8 bg-white/80 backdrop-blur-md rounded-3xl p-6 md:p-8 shadow-soft border border-pink-200/60">
      <div class="flex items-center justify-between mb-3">
        <h3 class="font-display text-2xl text-pink-700">Papan Pesan Manis 🍓</h3>
        <span class="text-2xl">💌</span>
      </div>
      <p class="text-pink-800/90">
        Tulis satu hal kecil yang Alma ingin aku lakukan biar harimu membaik.
      </p>
      <div class="mt-4 grid md:grid-cols-[1fr_auto] gap-3">
        <input id="wishInput" maxlength="80" placeholder="Contoh: Ajak jalan sore, atau beliin es krim..." class="w-full px-4 py-3 rounded-xl bg-white border border-pink-300 focus:ring-4 focus:ring-pink-200 outline-none text-pink-900 placeholder-pink-400" />
        <button id="addWishBtn" class="px-5 py-3 rounded-xl bg-pink-500 hover:bg-pink-600 active:bg-pink-700 text-white font-display shadow-soft transition focus:outline-none focus:ring-4 focus:ring-pink-300">
          Tambah 💗
        </button>
      </div>
      <ul id="wishList" class="mt-4 grid sm:grid-cols-2 gap-3">
        <!-- Wishes will appear here -->
      </ul>
    </section>

    <!-- Footer -->
    <footer class="text-center py-8 text-pink-800/80">
      <p class="font-body">Dibuat dengan niat baik dan banyak hati pink 💗</p>
    </footer>
  </main>

  <!-- Modal -->
  <div id="modal" class="fixed inset-0 hidden items-center justify-center bg-black/30 backdrop-blur-sm z-50">
    <div class="w-[92%] max-w-md bg-white rounded-3xl p-6 shadow-soft border border-pink-200 animate-pop">
      <div class="flex items-start gap-3">
        <span class="text-3xl">🌈</span>
        <div>
          <h4 class="font-display text-2xl text-pink-700">Terima kasih, Alma!</h4>
          <p id="modalText" class="mt-2 text-pink-800/90">
            Aku janji akan lebih hati-hati sama perasaanmu.
          </p>
        </div>
      </div>
      <div class="mt-5 flex justify-end">
        <button id="closeModal" class="px-5 py-2.5 rounded-xl bg-pink-500 hover:bg-pink-600 text-white font-display focus:outline-none focus:ring-4 focus:ring-pink-300">
          Tutup
        </button>
      </div>
    </div>
  </div>

  <script>
    // Compliments
    const compliments = [
      "Alma itu istimewa, senyumnya bisa nular bahagia! ✨",
      "Kamu hebat banget—terus jadi dirimu yang hangat ya 💞",
      "Matamu secerah pagi, bikin hati adem 🌤️",
      "Terima kasih sudah kuat sejauh ini. Kamu keren! 🌷",
      "Dunia jadi lebih manis karena ada Alma 🍰"
    ];
    const complimentBtn = document.getElementById("complimentBtn");
    const complimentText = document.getElementById("complimentText");
    complimentBtn.addEventListener("click", () => {
      const pick = compliments[Math.floor(Math.random() * compliments.length)];
      complimentText.textContent = pick;
      complimentText.classList.remove("animate-pop");
      void complimentText.offsetWidth; // restart animation
      complimentText.classList.add("animate-pop");
    });

    // Hearts mini-game
    const heartsArea = document.getElementById("heartsArea");
    const reward = document.getElementById("reward");
    let popped = 0, goal = 7, heartId = 0;
    function spawnHeart() {
      const h = document.createElement("div");
      const size = 26 + Math.floor(Math.random() * 18);
      const top = Math.random() * (heartsArea.clientHeight - size - 10);
      const left = Math.random() * (heartsArea.clientWidth - size - 10);
      h.dataset.id = ++heartId;
      h.style.width = size + "px";
      h.style.height = size + "px";
      h.style.top = top + "px";
      h.style.left = left + "px";
      h.className = "heart absolute cursor-pointer transition-transform";
      h.innerHTML = `
        <svg width="${size}" height="${size}" viewBox="0 0 84 84" xmlns="http://www.w3.org/2000/svg" class="drop-shadow">
          <path d="M42 70C42 70 10 52 10 30C10 20 18 12 28 12C35 12 39.5 16 42 20C44.5 16 49 12 56 12C66 12 74 20 74 30C74 52 42 70 42 70Z"
            fill="#FF79C1" stroke="#D44E94" stroke-width="3"/>
        </svg>`;
      h.addEventListener("click", () => {
        if (h.classList.contains("pointer-events-none")) return;
        h.style.transform = "scale(0)";
        h.classList.add("pointer-events-none");
        popped++;
        if (popped >= goal) {
          reward.classList.remove("hidden");
          reward.classList.add("animate-pop");
        } else {
          // spawn an extra one to keep area lively
          setTimeout(spawnHeart, 400);
        }
      });
      heartsArea.appendChild(h);
      // auto float
      const floatY = 6 + Math.random() * 8;
      h.animate([
        { transform: "translateY(0)" },
        { transform: `translateY(-${floatY}px)` },
        { transform: "translateY(0)" }
      ], { duration: 1800 + Math.random() * 1200, iterations: Infinity, easing: "ease-in-out" });
    }
    // initial hearts
    function initHearts() {
      heartsArea.innerHTML = "";
      popped = 0;
      reward.classList.add("hidden");
      for (let i = 0; i < 8; i++) spawnHeart();
    }
    window.addEventListener("resize", () => {
      // Re-layout hearts on resize to avoid overflow
      const hearts = [...heartsArea.querySelectorAll(".heart")];
      hearts.forEach(h => h.remove());
      for (let i = 0; i < 6; i++) spawnHeart();
    });
    initHearts();

    // Care Pack actions
    const careToast = document.getElementById("careToast");
    document.querySelectorAll(".care-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const item = btn.getAttribute("data-item");
        careToast.textContent =
          item === "peluk" ? "Peluk virtual terkirim! Rasakan hangatnya 🤗" :
          item === "teh" ? "Teh hangat + biskuit imut sedang jalan 🍵" :
          "Playlist happy siap diputar di hati 🎶";
        careToast.classList.remove("hidden");
        careToast.classList.add("animate-pop");
        setTimeout(() => careToast.classList.add("hidden"), 1800);
      });
    });

    // Message Board with localStorage
    const wishInput = document.getElementById("wishInput");
    const addWishBtn = document.getElementById("addWishBtn");
    const wishList = document.getElementById("wishList");

    const WISH_KEY = "canva_code_wishes_alma";
    function loadWishes() {
      try {
        const saved = JSON.parse(localStorage.getItem(WISH_KEY) || "[]");
        saved.forEach(w => renderWish(w));
      } catch {
        // ignore
      }
    }
    function saveWishes() {
      const items = [...wishList.querySelectorAll("li")].map(li => ({
        id: li.dataset.id,
        text: li.querySelector(".wtext").textContent
      }));
      localStorage.setItem(WISH_KEY, JSON.stringify(items.slice(0, 20)));
    }
    function renderWish(item) {
      const li = document.createElement("li");
      li.dataset.id = item.id;
      li.className = "group flex items-center justify-between gap-3 p-3 rounded-xl bg-white border border-pink-200 hover:border-pink-300 transition";
      li.innerHTML = `
        <span class="wtext text-pink-800">${item.text}</span>
        <div class="flex items-center gap-2">
          <button title="Selesai" class="done px-3 py-1.5 rounded-lg bg-candy-100 text-pink-800 hover:bg-candy-200">✅</button>
          <button title="Hapus" class="del px-3 py-1.5 rounded-lg bg-white border border-pink-200 text-pink-700 hover:bg-pink-50">🗑️</button>
        </div>
      `;
      li.querySelector(".del").addEventListener("click", () => {
        li.remove();
        saveWishes();
      });
      li.querySelector(".done").addEventListener("click", () => {
        const text = li.querySelector(".wtext");
        text.classList.toggle("line-through");
        text.classList.toggle("opacity-60");
        li.classList.add("animate-pop");
        saveWishes();
      });
      wishList.appendChild(li);
    }
    addWishBtn.addEventListener("click", () => {
      const text = wishInput.value.trim();
      if (!text) {
        wishInput.classList.add("shadow-inner", "shadow-pink-200");
        setTimeout(() => wishInput.classList.remove("shadow-inner", "shadow-pink-200"), 600);
        return;
      }
      const item = { id: String(Date.now()), text };
      renderWish(item);
      saveWishes();
      wishInput.value = "";
      wishInput.focus();
    });
    loadWishes();

    // Modal handling (accept / talk)
    const modal = document.getElementById("modal");
    const modalText = document.getElementById("modalText");
    const closeModal = document.getElementById("closeModal");
    function openModal(text) {
      modalText.textContent = text;
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    }
    function hideModal() {
      modal.classList.add("hidden");
      modal.classList.remove("flex");
    }
    document.getElementById("acceptBtn").addEventListener("click", () => {
      openModal("Terima kasih sudah maafin aku. Aku janji akan jaga perasaan Alma lebih baik lagi. 💗");
    });
    document.getElementById("talkBtn").addEventListener("click", () => {
      openModal("Aku siap dengerin. Ceritain pelan-pelan ya, aku di sini buat kamu. 🌷");
    });
    closeModal.addEventListener("click", hideModal);
    modal.addEventListener("click", (e) => {
      if (e.target === modal) hideModal();
    });
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97f9f7e105733d87',t:'MTc1Nzk1ODY0Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
